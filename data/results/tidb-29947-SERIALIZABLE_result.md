# Bug ID tidb-29947-SERIALIZABLE

## Description

Link:                     https://github.com/pingcap/tidb/issues/29947
Original isolation level: IsolationLevel.REPEATABLE_READ
Tested isolation level:   IsolationLevel.SERIALIZABLE


## Details
 * Database: tidb-5.2.1
 * Number of scenarios: 2
 * Initial setup script: /home/theodor/Projects/MasterThesis/data/sql/tidb-29947_mysql_bk.sql

## Results
### Scenario 0
 * Instruction #0:
     - SQL:  SET GLOBAL TRANSACTION ISOLATION LEVEL SERIALIZABLE;
     - TID: 0
     - Output: Error: 8048 (HY000): The isolation level 'SERIALIZABLE' is not supported. Set tidb_skip_isolation_level_check=1 to skip this error
 * Instruction #1:
     - SQL:  delete from t_tir89b where t_tir89b.c_3pcik >= t_tir89b.c_sroc_c;
     - TID: 0
     - Output: Skipped due to previous error.
 * Instruction #2:
     - SQL:  select * from (select count(*) over (partition by ref_0.c_0b6nxb order by ref_0...
     - TID: 0
     - Output: Skipped due to previous error.

 * Container logs:
   > [2024/06/05 19:02:17.246 +00:00] [INFO] [session.go:2948] ["CRUCIAL OPERATION"] [conn=41] [schemaVersion=59] [cur_db=] [sql="drop database if exists testdb;"] [user=root@127.0.0.1]
   > [2024/06/05 19:02:17.247 +00:00] [INFO] [ddl_worker.go:318] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:94, Type:drop schema, State:none, SchemaState:queueing, SchemaID:88, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:17.246 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
   > [2024/06/05 19:02:17.247 +00:00] [INFO] [ddl.go:546] ["[ddl] start DDL job"] [job="ID:94, Type:drop schema, State:none, SchemaState:queueing, SchemaID:88, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:17.246 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="drop database if exists testdb;"]
   > [2024/06/05 19:02:17.247 +00:00] [INFO] [ddl_worker.go:727] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:94, Type:drop schema, State:none, SchemaState:queueing, SchemaID:88, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:17.246 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.248 +00:00] [INFO] [domain.go:129] ["diff load InfoSchema success"] [currentSchemaVersion=59] [neededSchemaVersion=60] ["start time"=86.814µs] [phyTblIDs="[90,92]"] [actionTypes="[4,4]"]
   > [2024/06/05 19:02:17.250 +00:00] [INFO] [ddl_worker.go:912] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=60] ["take time"=2.027797ms] [job="ID:94, Type:drop schema, State:running, SchemaState:write only, SchemaID:88, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:17.246 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.250 +00:00] [INFO] [ddl_worker.go:727] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:94, Type:drop schema, State:running, SchemaState:write only, SchemaID:88, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:17.246 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.251 +00:00] [INFO] [domain.go:129] ["diff load InfoSchema success"] [currentSchemaVersion=60] [neededSchemaVersion=61] ["start time"=61.88µs] [phyTblIDs="[]"] [actionTypes="[]"]
   > [2024/06/05 19:02:17.254 +00:00] [INFO] [ddl_worker.go:912] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=61] ["take time"=2.51767ms] [job="ID:94, Type:drop schema, State:running, SchemaState:delete only, SchemaID:88, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:17.246 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.254 +00:00] [INFO] [ddl_worker.go:727] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:94, Type:drop schema, State:running, SchemaState:delete only, SchemaID:88, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:17.246 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.256 +00:00] [INFO] [domain.go:129] ["diff load InfoSchema success"] [currentSchemaVersion=61] [neededSchemaVersion=62] ["start time"=162.243µs] [phyTblIDs="[]"] [actionTypes="[]"]
   > [2024/06/05 19:02:17.258 +00:00] [INFO] [ddl_worker.go:912] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=62] ["take time"=2.156027ms] [job="ID:94, Type:drop schema, State:done, SchemaState:queueing, SchemaID:88, TableID:0, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:17.246 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.258 +00:00] [INFO] [delete_range.go:439] ["[ddl] batch insert into delete-range table"] [jobID=94] [elementIDs="[90,92]"]
   > [2024/06/05 19:02:17.259 +00:00] [INFO] [delete_range.go:106] ["[ddl] add job into delete-range table"] [jobID=94] [jobType="drop schema"]
   > [2024/06/05 19:02:17.259 +00:00] [INFO] [ddl_worker.go:423] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:94, Type:drop schema, State:synced, SchemaState:queueing, SchemaID:88, TableID:0, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:17.246 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.260 +00:00] [INFO] [ddl.go:601] ["[ddl] DDL job is finished"] [jobID=94]
   > [2024/06/05 19:02:17.261 +00:00] [INFO] [callback.go:106] ["performing DDL change, must reload"]
   > [2024/06/05 19:02:17.262 +00:00] [INFO] [session.go:2948] ["CRUCIAL OPERATION"] [conn=41] [schemaVersion=62] [cur_db=] [sql="create database testdb;"] [user=root@127.0.0.1]
   > [2024/06/05 19:02:17.263 +00:00] [INFO] [ddl_worker.go:318] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:96, Type:create schema, State:none, SchemaState:queueing, SchemaID:95, TableID:0, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:17.262 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
   > [2024/06/05 19:02:17.263 +00:00] [INFO] [ddl.go:546] ["[ddl] start DDL job"] [job="ID:96, Type:create schema, State:none, SchemaState:queueing, SchemaID:95, TableID:0, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:17.262 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="create database testdb;"]
   > [2024/06/05 19:02:17.264 +00:00] [INFO] [ddl_worker.go:727] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:96, Type:create schema, State:none, SchemaState:queueing, SchemaID:95, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:17.262 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.264 +00:00] [INFO] [domain.go:129] ["diff load InfoSchema success"] [currentSchemaVersion=62] [neededSchemaVersion=63] ["start time"=160.846µs] [phyTblIDs="[]"] [actionTypes="[]"]
   > [2024/06/05 19:02:17.266 +00:00] [INFO] [ddl_worker.go:912] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=63] ["take time"=2.142058ms] [job="ID:96, Type:create schema, State:done, SchemaState:public, SchemaID:95, TableID:0, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:17.262 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.267 +00:00] [INFO] [ddl_worker.go:423] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:96, Type:create schema, State:synced, SchemaState:public, SchemaID:95, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:17.262 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.267 +00:00] [INFO] [delete_range.go:236] ["[ddl] delRange emulator complete task"] [jobID=94] [elementID=90]
   > [2024/06/05 19:02:17.268 +00:00] [INFO] [ddl.go:601] ["[ddl] DDL job is finished"] [jobID=96]
   > [2024/06/05 19:02:17.268 +00:00] [INFO] [callback.go:106] ["performing DDL change, must reload"]
   > [2024/06/05 19:02:17.270 +00:00] [INFO] [session.go:2948] ["CRUCIAL OPERATION"] [conn=41] [schemaVersion=63] [cur_db=testdb] [sql="drop table if exists t_tir89b, t_vejdy;"] [user=root@127.0.0.1]
   > [2024/06/05 19:02:17.271 +00:00] [INFO] [session.go:2948] ["CRUCIAL OPERATION"] [conn=41] [schemaVersion=63] [cur_db=testdb] [sql="\nCREATE TABLE `t_tir89b` (\n`c_3pcik` int(11) DEFAULT NULL,\n`c_0b6nxb` text DEFAULT NULL,\n`c_qytrlc` double NOT NULL,\n`c_sroc_c` int(11) DEFAULT NULL,\nPRIMARY KEY (`c_qytrlc`) /*T![clustered_index] NONCLUSTERED */\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=root@127.0.0.1]
   > [2024/06/05 19:02:17.272 +00:00] [INFO] [ddl_worker.go:318] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:98, Type:create table, State:none, SchemaState:queueing, SchemaID:95, TableID:97, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:17.271 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
   > [2024/06/05 19:02:17.272 +00:00] [INFO] [ddl.go:546] ["[ddl] start DDL job"] [job="ID:98, Type:create table, State:none, SchemaState:queueing, SchemaID:95, TableID:97, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:17.271 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="\nCREATE TABLE `t_tir89b` (\n`c_3pcik` int(11) DEFAULT NULL,\n`c_0b6nxb` text DEFAULT NULL,\n`c_qytrlc` double NOT NULL,\n`c_sroc_c` int(11) DEFAULT NULL,\nPRIMARY KEY (`c_qytrlc`) /*T![clustered_index] NONCLUSTERED */\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
   > [2024/06/05 19:02:17.272 +00:00] [INFO] [ddl_worker.go:727] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:98, Type:create table, State:none, SchemaState:queueing, SchemaID:95, TableID:97, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:17.271 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.273 +00:00] [INFO] [delete_range.go:236] ["[ddl] delRange emulator complete task"] [jobID=94] [elementID=92]
   > [2024/06/05 19:02:17.274 +00:00] [INFO] [domain.go:129] ["diff load InfoSchema success"] [currentSchemaVersion=63] [neededSchemaVersion=64] ["start time"=198.002µs] [phyTblIDs="[97]"] [actionTypes="[8]"]
   > [2024/06/05 19:02:17.276 +00:00] [INFO] [ddl_worker.go:912] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=64] ["take time"=2.175024ms] [job="ID:98, Type:create table, State:done, SchemaState:public, SchemaID:95, TableID:97, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:17.271 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.276 +00:00] [INFO] [ddl_worker.go:423] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:98, Type:create table, State:synced, SchemaState:public, SchemaID:95, TableID:97, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:17.271 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.277 +00:00] [INFO] [ddl.go:601] ["[ddl] DDL job is finished"] [jobID=98]
   > [2024/06/05 19:02:17.277 +00:00] [INFO] [callback.go:106] ["performing DDL change, must reload"]
   > [2024/06/05 19:02:17.277 +00:00] [INFO] [split_region.go:83] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=74] ["first split key"=748000000000000061]
   > [2024/06/05 19:02:17.277 +00:00] [INFO] [split_region.go:184] ["batch split regions complete"] ["batch region ID"=74] ["first at"=748000000000000061] ["first new region left"="{Id:74 StartKey:7480000000000000ff5c00000000000000f8 EndKey:7480000000000000ff6100000000000000f8 RegionEpoch:{ConfVer:1 Version:2} Peers:[id:75 store_id:1 ] EncryptionMeta:<nil>}"] ["new region count"=1]
   > [2024/06/05 19:02:17.277 +00:00] [INFO] [split_region.go:233] ["split regions complete"] ["region count"=1] ["region IDs"="[74]"]
   > [2024/06/05 19:02:17.278 +00:00] [WARN] [2pc.go:1598] ["schemaLeaseChecker is not set for this transaction"] [sessionID=41] [startTS=450262240402341891] [commitTS=450262240402604032]
   > [2024/06/05 19:02:17.281 +00:00] [INFO] [session.go:2948] ["CRUCIAL OPERATION"] [conn=41] [schemaVersion=64] [cur_db=testdb] [sql="\nCREATE TABLE `t_vejdy` (\n`c_iovir` int(11) NOT NULL,\n`c_r_mw3d` double DEFAULT NULL,\n`c_uxhghb` int(11) DEFAULT NULL,\n`c_rb7otb` int(11) NOT NULL,\n`c_dplyac` int(11) DEFAULT NULL,\n`c_lmcqed` double DEFAULT NULL,\n`c_ayaoed` text DEFAULT NULL,\n`c__zbqr` int(11) DEFAULT NULL,\nPRIMARY KEY (`c_iovir`,`c_rb7otb`) /*T![clustered_index] NONCLUSTERED */,\nKEY `t_e1ejcd` (`c_uxhghb`),\nKEY `t_o6ui_b` (`c_iovir`,`c_r_mw3d`,`c_uxhghb`,`c_rb7otb`,`c_dplyac`,`c_lmcqed`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=root@127.0.0.1]
   > [2024/06/05 19:02:17.282 +00:00] [INFO] [ddl_worker.go:318] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:100, Type:create table, State:none, SchemaState:queueing, SchemaID:95, TableID:99, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:17.282 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
   > [2024/06/05 19:02:17.282 +00:00] [INFO] [ddl.go:546] ["[ddl] start DDL job"] [job="ID:100, Type:create table, State:none, SchemaState:queueing, SchemaID:95, TableID:99, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:17.282 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="\nCREATE TABLE `t_vejdy` (\n`c_iovir` int(11) NOT NULL,\n`c_r_mw3d` double DEFAULT NULL,\n`c_uxhghb` int(11) DEFAULT NULL,\n`c_rb7otb` int(11) NOT NULL,\n`c_dplyac` int(11) DEFAULT NULL,\n`c_lmcqed` double DEFAULT NULL,\n`c_ayaoed` text DEFAULT NULL,\n`c__zbqr` int(11) DEFAULT NULL,\nPRIMARY KEY (`c_iovir`,`c_rb7otb`) /*T![clustered_index] NONCLUSTERED */,\nKEY `t_e1ejcd` (`c_uxhghb`),\nKEY `t_o6ui_b` (`c_iovir`,`c_r_mw3d`,`c_uxhghb`,`c_rb7otb`,`c_dplyac`,`c_lmcqed`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
   > [2024/06/05 19:02:17.283 +00:00] [INFO] [ddl_worker.go:727] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:100, Type:create table, State:none, SchemaState:queueing, SchemaID:95, TableID:99, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:17.282 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.285 +00:00] [INFO] [domain.go:129] ["diff load InfoSchema success"] [currentSchemaVersion=64] [neededSchemaVersion=65] ["start time"=455.231µs] [phyTblIDs="[99]"] [actionTypes="[8]"]
   > [2024/06/05 19:02:17.287 +00:00] [INFO] [ddl_worker.go:912] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=65] ["take time"=2.236974ms] [job="ID:100, Type:create table, State:done, SchemaState:public, SchemaID:95, TableID:99, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:17.282 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.289 +00:00] [INFO] [ddl_worker.go:423] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:100, Type:create table, State:synced, SchemaState:public, SchemaID:95, TableID:99, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:17.282 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:17.290 +00:00] [INFO] [ddl.go:601] ["[ddl] DDL job is finished"] [jobID=100]
   > [2024/06/05 19:02:17.290 +00:00] [INFO] [callback.go:106] ["performing DDL change, must reload"]
   > [2024/06/05 19:02:17.290 +00:00] [INFO] [split_region.go:83] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=76] ["first split key"=748000000000000063]
   > [2024/06/05 19:02:17.291 +00:00] [INFO] [split_region.go:184] ["batch split regions complete"] ["batch region ID"=76] ["first at"=748000000000000063] ["first new region left"="{Id:76 StartKey:7480000000000000ff6100000000000000f8 EndKey:7480000000000000ff6300000000000000f8 RegionEpoch:{ConfVer:1 Version:2} Peers:[id:77 store_id:1 ] EncryptionMeta:<nil>}"] ["new region count"=1]
   > [2024/06/05 19:02:17.291 +00:00] [INFO] [split_region.go:233] ["split regions complete"] ["region count"=1] ["region IDs"="[76]"]
   > [2024/06/05 19:02:17.292 +00:00] [WARN] [2pc.go:1598] ["schemaLeaseChecker is not set for this transaction"] [sessionID=41] [startTS=450262240406274049] [commitTS=450262240406274050]
   > [2024/06/05 19:02:18.521 +00:00] [INFO] [tidb.go:242] ["rollbackTxn called due to ddl/autocommit failure"]
   > [2024/06/05 19:02:18.521 +00:00] [WARN] [session.go:1683] ["run statement failed"] [conn=43] [schemaVersion=65] [error="[variable:8048]The isolation level 'SERIALIZABLE' is not supported. Set tidb_skip_isolation_level_check=1 to skip this error"] [session="{\n  \"currDBName\": \"testdb\",\n  \"id\": 43,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": {\n    \"Username\": \"root\",\n    \"Hostname\": \"127.0.0.1\",\n    \"CurrentUser\": false,\n    \"AuthUsername\": \"root\",\n    \"AuthHostname\": \"%\"\n  }\n}"]
   > [2024/06/05 19:02:18.521 +00:00] [INFO] [conn.go:995] ["command dispatched failed"] [conn=43] [connInfo="id:43, addr:127.0.0.1:51852 status:10, collation:utf8mb4_0900_ai_ci, user:root"] [command=Query] [status="inTxn:0, autocommit:1"] [sql=" SET GLOBAL TRANSACTION ISOLATION LEVEL SERIALIZABLE;"] [txn_mode=OPTIMISTIC] [err="[variable:8048]The isolation level 'SERIALIZABLE' is not supported. Set tidb_skip_isolation_level_check=1 to skip this error\ngithub.com/pingcap/errors.AddStack\n\t/nfs/cache/mod/github.com/pingcap/errors@v0.11.5-0.20210425183316-da1aaba5fb63/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/nfs/cache/mod/github.com/pingcap/errors@v0.11.5-0.20210425183316-da1aaba5fb63/normalize.go:159\ngithub.com/pingcap/tidb/sessionctx/variable.checkIsolationLevel\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/sessionctx/variable/varsutil.go:155\ngithub.com/pingcap/tidb/sessionctx/variable.glob..func23\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/sessionctx/variable/sysvar.go:716\ngithub.com/pingcap/tidb/sessionctx/variable.(*SysVar).Validate\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/sessionctx/variable/sysvar.go:256\ngithub.com/pingcap/tidb/session.(*session).SetGlobalSysVar\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/session/session.go:1158\ngithub.com/pingcap/tidb/executor.(*SetExecutor).setSysVariable\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/set.go:116\ngithub.com/pingcap/tidb/executor.(*SetExecutor).Next\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/set.go:98\ngithub.com/pingcap/tidb/executor.Next\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/executor.go:285\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/adapter.go:590\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/adapter.go:471\ngithub.com/pingcap/tidb/executor.(*ExecStmt).Exec\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/adapter.go:420\ngithub.com/pingcap/tidb/session.runStmt\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/session/session.go:1786\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/session/session.go:1680\ngithub.com/pingcap/tidb/server.(*TiDBContext).ExecuteStmt\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/server/driver_tidb.go:218\ngithub.com/pingcap/tidb/server.(*clientConn).handleStmt\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/server/conn.go:1818\ngithub.com/pingcap/tidb/server.(*clientConn).handleQuery\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/server/conn.go:1690\ngithub.com/pingcap/tidb/server.(*clientConn).dispatch\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/server/conn.go:1215\ngithub.com/pingcap/tidb/server.(*clientConn).Run\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/server/conn.go:978\ngithub.com/pingcap/tidb/server.(*Server).onConn\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/server/server.go:501\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371"]

### Scenario 1
 * Instruction #0:
     - SQL:  SET GLOBAL TRANSACTION ISOLATION LEVEL SERIALIZABLE;
     - TID: 0
     - Output: Error: 8048 (HY000): The isolation level 'SERIALIZABLE' is not supported. Set tidb_skip_isolation_level_check=1 to skip this error
 * Instruction #1:
     - SQL:  start transaction;
     - TID: 0
     - Output: Skipped due to previous error.
 * Instruction #2:
     - SQL:  delete from t_tir89b where t_tir89b.c_3pcik >= t_tir89b.c_sroc_c;
     - TID: 0
     - Output: Skipped due to previous error.
 * Instruction #3:
     - SQL:  select * from (select count(*) over (partition by ref_0.c_0b6nxb order by ref_0...
     - TID: 0
     - Output: Skipped due to previous error.
 * Instruction #4:
     - SQL:  commit;
     - TID: 0
     - Output: Skipped due to previous error.

 * Container logs:
   > [2024/06/05 19:02:19.278 +00:00] [INFO] [session.go:2948] ["CRUCIAL OPERATION"] [conn=47] [schemaVersion=65] [cur_db=] [sql="drop database if exists testdb;"] [user=root@127.0.0.1]
   > [2024/06/05 19:02:19.279 +00:00] [INFO] [ddl_worker.go:318] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:101, Type:drop schema, State:none, SchemaState:queueing, SchemaID:95, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:19.278 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
   > [2024/06/05 19:02:19.279 +00:00] [INFO] [ddl.go:546] ["[ddl] start DDL job"] [job="ID:101, Type:drop schema, State:none, SchemaState:queueing, SchemaID:95, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:19.278 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="drop database if exists testdb;"]
   > [2024/06/05 19:02:19.279 +00:00] [INFO] [ddl_worker.go:727] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:101, Type:drop schema, State:none, SchemaState:queueing, SchemaID:95, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:19.278 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.280 +00:00] [INFO] [domain.go:129] ["diff load InfoSchema success"] [currentSchemaVersion=65] [neededSchemaVersion=66] ["start time"=63.417µs] [phyTblIDs="[97,99]"] [actionTypes="[4,4]"]
   > [2024/06/05 19:02:19.282 +00:00] [INFO] [ddl_worker.go:912] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=66] ["take time"=2.165386ms] [job="ID:101, Type:drop schema, State:running, SchemaState:write only, SchemaID:95, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:19.278 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.283 +00:00] [INFO] [ddl_worker.go:727] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:101, Type:drop schema, State:running, SchemaState:write only, SchemaID:95, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:19.278 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.283 +00:00] [INFO] [domain.go:129] ["diff load InfoSchema success"] [currentSchemaVersion=66] [neededSchemaVersion=67] ["start time"=90.865µs] [phyTblIDs="[]"] [actionTypes="[]"]
   > [2024/06/05 19:02:19.286 +00:00] [INFO] [ddl_worker.go:912] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=67] ["take time"=2.298575ms] [job="ID:101, Type:drop schema, State:running, SchemaState:delete only, SchemaID:95, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:19.278 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.286 +00:00] [INFO] [ddl_worker.go:727] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:101, Type:drop schema, State:running, SchemaState:delete only, SchemaID:95, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:19.278 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.288 +00:00] [INFO] [domain.go:129] ["diff load InfoSchema success"] [currentSchemaVersion=67] [neededSchemaVersion=68] ["start time"=76.268µs] [phyTblIDs="[]"] [actionTypes="[]"]
   > [2024/06/05 19:02:19.290 +00:00] [INFO] [ddl_worker.go:912] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=68] ["take time"=2.384411ms] [job="ID:101, Type:drop schema, State:done, SchemaState:queueing, SchemaID:95, TableID:0, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:19.278 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.290 +00:00] [INFO] [delete_range.go:439] ["[ddl] batch insert into delete-range table"] [jobID=101] [elementIDs="[97,99]"]
   > [2024/06/05 19:02:19.291 +00:00] [INFO] [delete_range.go:106] ["[ddl] add job into delete-range table"] [jobID=101] [jobType="drop schema"]
   > [2024/06/05 19:02:19.292 +00:00] [INFO] [ddl_worker.go:423] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:101, Type:drop schema, State:synced, SchemaState:queueing, SchemaID:95, TableID:0, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:19.278 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.292 +00:00] [INFO] [ddl.go:601] ["[ddl] DDL job is finished"] [jobID=101]
   > [2024/06/05 19:02:19.292 +00:00] [INFO] [callback.go:106] ["performing DDL change, must reload"]
   > [2024/06/05 19:02:19.293 +00:00] [INFO] [session.go:2948] ["CRUCIAL OPERATION"] [conn=47] [schemaVersion=68] [cur_db=] [sql="create database testdb;"] [user=root@127.0.0.1]
   > [2024/06/05 19:02:19.295 +00:00] [INFO] [ddl_worker.go:318] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:103, Type:create schema, State:none, SchemaState:queueing, SchemaID:102, TableID:0, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:19.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
   > [2024/06/05 19:02:19.295 +00:00] [INFO] [ddl.go:546] ["[ddl] start DDL job"] [job="ID:103, Type:create schema, State:none, SchemaState:queueing, SchemaID:102, TableID:0, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:19.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="create database testdb;"]
   > [2024/06/05 19:02:19.295 +00:00] [INFO] [ddl_worker.go:727] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:103, Type:create schema, State:none, SchemaState:queueing, SchemaID:102, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:19.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.296 +00:00] [INFO] [domain.go:129] ["diff load InfoSchema success"] [currentSchemaVersion=68] [neededSchemaVersion=69] ["start time"=204.777µs] [phyTblIDs="[]"] [actionTypes="[]"]
   > [2024/06/05 19:02:19.298 +00:00] [INFO] [ddl_worker.go:912] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=69] ["take time"=2.281603ms] [job="ID:103, Type:create schema, State:done, SchemaState:public, SchemaID:102, TableID:0, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:19.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.299 +00:00] [INFO] [ddl_worker.go:423] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:103, Type:create schema, State:synced, SchemaState:public, SchemaID:102, TableID:0, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:19.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.300 +00:00] [INFO] [delete_range.go:236] ["[ddl] delRange emulator complete task"] [jobID=101] [elementID=97]
   > [2024/06/05 19:02:19.300 +00:00] [INFO] [ddl.go:601] ["[ddl] DDL job is finished"] [jobID=103]
   > [2024/06/05 19:02:19.300 +00:00] [INFO] [callback.go:106] ["performing DDL change, must reload"]
   > [2024/06/05 19:02:19.304 +00:00] [INFO] [session.go:2948] ["CRUCIAL OPERATION"] [conn=47] [schemaVersion=69] [cur_db=testdb] [sql="drop table if exists t_tir89b, t_vejdy;"] [user=root@127.0.0.1]
   > [2024/06/05 19:02:19.305 +00:00] [INFO] [session.go:2948] ["CRUCIAL OPERATION"] [conn=47] [schemaVersion=69] [cur_db=testdb] [sql="\nCREATE TABLE `t_tir89b` (\n`c_3pcik` int(11) DEFAULT NULL,\n`c_0b6nxb` text DEFAULT NULL,\n`c_qytrlc` double NOT NULL,\n`c_sroc_c` int(11) DEFAULT NULL,\nPRIMARY KEY (`c_qytrlc`) /*T![clustered_index] NONCLUSTERED */\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=root@127.0.0.1]
   > [2024/06/05 19:02:19.306 +00:00] [INFO] [ddl_worker.go:318] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:105, Type:create table, State:none, SchemaState:queueing, SchemaID:102, TableID:104, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:19.305 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
   > [2024/06/05 19:02:19.306 +00:00] [INFO] [ddl.go:546] ["[ddl] start DDL job"] [job="ID:105, Type:create table, State:none, SchemaState:queueing, SchemaID:102, TableID:104, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:19.305 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="\nCREATE TABLE `t_tir89b` (\n`c_3pcik` int(11) DEFAULT NULL,\n`c_0b6nxb` text DEFAULT NULL,\n`c_qytrlc` double NOT NULL,\n`c_sroc_c` int(11) DEFAULT NULL,\nPRIMARY KEY (`c_qytrlc`) /*T![clustered_index] NONCLUSTERED */\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
   > [2024/06/05 19:02:19.307 +00:00] [INFO] [ddl_worker.go:727] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:105, Type:create table, State:none, SchemaState:queueing, SchemaID:102, TableID:104, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:19.305 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.308 +00:00] [INFO] [delete_range.go:236] ["[ddl] delRange emulator complete task"] [jobID=101] [elementID=99]
   > [2024/06/05 19:02:19.308 +00:00] [INFO] [domain.go:129] ["diff load InfoSchema success"] [currentSchemaVersion=69] [neededSchemaVersion=70] ["start time"=470.248µs] [phyTblIDs="[104]"] [actionTypes="[8]"]
   > [2024/06/05 19:02:19.310 +00:00] [INFO] [ddl_worker.go:912] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=70] ["take time"=2.08402ms] [job="ID:105, Type:create table, State:done, SchemaState:public, SchemaID:102, TableID:104, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:19.305 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.311 +00:00] [INFO] [ddl_worker.go:423] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:105, Type:create table, State:synced, SchemaState:public, SchemaID:102, TableID:104, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:19.305 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.312 +00:00] [INFO] [ddl.go:601] ["[ddl] DDL job is finished"] [jobID=105]
   > [2024/06/05 19:02:19.312 +00:00] [INFO] [callback.go:106] ["performing DDL change, must reload"]
   > [2024/06/05 19:02:19.312 +00:00] [INFO] [split_region.go:83] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=78] ["first split key"=748000000000000068]
   > [2024/06/05 19:02:19.312 +00:00] [INFO] [split_region.go:184] ["batch split regions complete"] ["batch region ID"=78] ["first at"=748000000000000068] ["first new region left"="{Id:78 StartKey:7480000000000000ff6300000000000000f8 EndKey:7480000000000000ff6800000000000000f8 RegionEpoch:{ConfVer:1 Version:2} Peers:[id:79 store_id:1 ] EncryptionMeta:<nil>}"] ["new region count"=1]
   > [2024/06/05 19:02:19.312 +00:00] [INFO] [split_region.go:233] ["split regions complete"] ["region count"=1] ["region IDs"="[78]"]
   > [2024/06/05 19:02:19.312 +00:00] [WARN] [2pc.go:1598] ["schemaLeaseChecker is not set for this transaction"] [sessionID=47] [startTS=450262240935804930] [commitTS=450262240935804931]
   > [2024/06/05 19:02:19.314 +00:00] [INFO] [session.go:2948] ["CRUCIAL OPERATION"] [conn=47] [schemaVersion=70] [cur_db=testdb] [sql="\nCREATE TABLE `t_vejdy` (\n`c_iovir` int(11) NOT NULL,\n`c_r_mw3d` double DEFAULT NULL,\n`c_uxhghb` int(11) DEFAULT NULL,\n`c_rb7otb` int(11) NOT NULL,\n`c_dplyac` int(11) DEFAULT NULL,\n`c_lmcqed` double DEFAULT NULL,\n`c_ayaoed` text DEFAULT NULL,\n`c__zbqr` int(11) DEFAULT NULL,\nPRIMARY KEY (`c_iovir`,`c_rb7otb`) /*T![clustered_index] NONCLUSTERED */,\nKEY `t_e1ejcd` (`c_uxhghb`),\nKEY `t_o6ui_b` (`c_iovir`,`c_r_mw3d`,`c_uxhghb`,`c_rb7otb`,`c_dplyac`,`c_lmcqed`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=root@127.0.0.1]
   > [2024/06/05 19:02:19.315 +00:00] [INFO] [ddl_worker.go:318] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:107, Type:create table, State:none, SchemaState:queueing, SchemaID:102, TableID:106, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:19.314 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
   > [2024/06/05 19:02:19.315 +00:00] [INFO] [ddl.go:546] ["[ddl] start DDL job"] [job="ID:107, Type:create table, State:none, SchemaState:queueing, SchemaID:102, TableID:106, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:19.314 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="\nCREATE TABLE `t_vejdy` (\n`c_iovir` int(11) NOT NULL,\n`c_r_mw3d` double DEFAULT NULL,\n`c_uxhghb` int(11) DEFAULT NULL,\n`c_rb7otb` int(11) NOT NULL,\n`c_dplyac` int(11) DEFAULT NULL,\n`c_lmcqed` double DEFAULT NULL,\n`c_ayaoed` text DEFAULT NULL,\n`c__zbqr` int(11) DEFAULT NULL,\nPRIMARY KEY (`c_iovir`,`c_rb7otb`) /*T![clustered_index] NONCLUSTERED */,\nKEY `t_e1ejcd` (`c_uxhghb`),\nKEY `t_o6ui_b` (`c_iovir`,`c_r_mw3d`,`c_uxhghb`,`c_rb7otb`,`c_dplyac`,`c_lmcqed`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
   > [2024/06/05 19:02:19.316 +00:00] [INFO] [ddl_worker.go:727] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:107, Type:create table, State:none, SchemaState:queueing, SchemaID:102, TableID:106, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:19.314 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.318 +00:00] [INFO] [domain.go:129] ["diff load InfoSchema success"] [currentSchemaVersion=70] [neededSchemaVersion=71] ["start time"=610.35µs] [phyTblIDs="[106]"] [actionTypes="[8]"]
   > [2024/06/05 19:02:19.320 +00:00] [INFO] [ddl_worker.go:912] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=71] ["take time"=2.2742ms] [job="ID:107, Type:create table, State:done, SchemaState:public, SchemaID:102, TableID:106, RowCount:0, ArgLen:1, start time: 2024-06-05 19:02:19.314 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.321 +00:00] [INFO] [ddl_worker.go:423] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:107, Type:create table, State:synced, SchemaState:public, SchemaID:102, TableID:106, RowCount:0, ArgLen:0, start time: 2024-06-05 19:02:19.314 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
   > [2024/06/05 19:02:19.323 +00:00] [INFO] [ddl.go:601] ["[ddl] DDL job is finished"] [jobID=107]
   > [2024/06/05 19:02:19.323 +00:00] [INFO] [callback.go:106] ["performing DDL change, must reload"]
   > [2024/06/05 19:02:19.323 +00:00] [INFO] [split_region.go:83] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=80] ["first split key"=74800000000000006a]
   > [2024/06/05 19:02:19.323 +00:00] [INFO] [split_region.go:184] ["batch split regions complete"] ["batch region ID"=80] ["first at"=74800000000000006a] ["first new region left"="{Id:80 StartKey:7480000000000000ff6800000000000000f8 EndKey:7480000000000000ff6a00000000000000f8 RegionEpoch:{ConfVer:1 Version:2} Peers:[id:81 store_id:1 ] EncryptionMeta:<nil>}"] ["new region count"=1]
   > [2024/06/05 19:02:19.323 +00:00] [INFO] [split_region.go:233] ["split regions complete"] ["region count"=1] ["region IDs"="[80]"]
   > [2024/06/05 19:02:19.324 +00:00] [WARN] [2pc.go:1598] ["schemaLeaseChecker is not set for this transaction"] [sessionID=47] [startTS=450262240938950657] [commitTS=450262240938950658]
   > [2024/06/05 19:02:20.552 +00:00] [INFO] [tidb.go:242] ["rollbackTxn called due to ddl/autocommit failure"]
   > [2024/06/05 19:02:20.553 +00:00] [WARN] [session.go:1683] ["run statement failed"] [conn=49] [schemaVersion=71] [error="[variable:8048]The isolation level 'SERIALIZABLE' is not supported. Set tidb_skip_isolation_level_check=1 to skip this error"] [session="{\n  \"currDBName\": \"testdb\",\n  \"id\": 49,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": {\n    \"Username\": \"root\",\n    \"Hostname\": \"127.0.0.1\",\n    \"CurrentUser\": false,\n    \"AuthUsername\": \"root\",\n    \"AuthHostname\": \"%\"\n  }\n}"]
   > [2024/06/05 19:02:20.553 +00:00] [INFO] [conn.go:995] ["command dispatched failed"] [conn=49] [connInfo="id:49, addr:127.0.0.1:51894 status:10, collation:utf8mb4_0900_ai_ci, user:root"] [command=Query] [status="inTxn:0, autocommit:1"] [sql=" SET GLOBAL TRANSACTION ISOLATION LEVEL SERIALIZABLE;"] [txn_mode=OPTIMISTIC] [err="[variable:8048]The isolation level 'SERIALIZABLE' is not supported. Set tidb_skip_isolation_level_check=1 to skip this error\ngithub.com/pingcap/errors.AddStack\n\t/nfs/cache/mod/github.com/pingcap/errors@v0.11.5-0.20210425183316-da1aaba5fb63/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/nfs/cache/mod/github.com/pingcap/errors@v0.11.5-0.20210425183316-da1aaba5fb63/normalize.go:159\ngithub.com/pingcap/tidb/sessionctx/variable.checkIsolationLevel\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/sessionctx/variable/varsutil.go:155\ngithub.com/pingcap/tidb/sessionctx/variable.glob..func23\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/sessionctx/variable/sysvar.go:716\ngithub.com/pingcap/tidb/sessionctx/variable.(*SysVar).Validate\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/sessionctx/variable/sysvar.go:256\ngithub.com/pingcap/tidb/session.(*session).SetGlobalSysVar\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/session/session.go:1158\ngithub.com/pingcap/tidb/executor.(*SetExecutor).setSysVariable\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/set.go:116\ngithub.com/pingcap/tidb/executor.(*SetExecutor).Next\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/set.go:98\ngithub.com/pingcap/tidb/executor.Next\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/executor.go:285\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/adapter.go:590\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/adapter.go:471\ngithub.com/pingcap/tidb/executor.(*ExecStmt).Exec\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/adapter.go:420\ngithub.com/pingcap/tidb/session.runStmt\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/session/session.go:1786\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/session/session.go:1680\ngithub.com/pingcap/tidb/server.(*TiDBContext).ExecuteStmt\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/server/driver_tidb.go:218\ngithub.com/pingcap/tidb/server.(*clientConn).handleStmt\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/server/conn.go:1818\ngithub.com/pingcap/tidb/server.(*clientConn).handleQuery\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/server/conn.go:1690\ngithub.com/pingcap/tidb/server.(*clientConn).dispatch\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/server/conn.go:1215\ngithub.com/pingcap/tidb/server.(*clientConn).Run\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/server/conn.go:978\ngithub.com/pingcap/tidb/server.(*Server).onConn\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/server/server.go:501\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1371"]
